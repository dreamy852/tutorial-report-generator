<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial Report Generator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title" data-en="Tutorial Report Generator" data-zh="補習報告生成器">Tutorial Report Generator</h1>
            <div class="language-toggle">
                <button class="lang-btn active" data-lang="en" onclick="switchLanguage('en')">English</button>
                <button class="lang-btn" data-lang="zh" onclick="switchLanguage('zh')">繁體中文</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Form Section -->
            <div class="form-section">
                <form id="reportForm" class="form">
                    <!-- Student Information -->
                    <section class="form-group">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 class="section-title" data-en="Student Information" data-zh="學生資料" style="margin: 0;">Student Information</h2>
                            <button type="button" class="btn btn-secondary" onclick="showAddNewForm()" data-en="Add New" data-zh="新增">
                                新增
                            </button>
                        </div>
                        
                        <div class="form-field">
                            <label for="teacherSelect" data-en="Teacher" data-zh="教師">教師 *</label>
                            <select id="teacherSelect" name="teacherSelect" required>
                                <option value="" data-en="-- Please select teacher --" data-zh="-- 請選擇教師 --">-- 請選擇教師 --</option>
                            </select>
                        </div>
                        
                        <div class="form-field">
                            <label for="studentSelect" data-en="Student" data-zh="學生">學生 *</label>
                            <select id="studentSelect" name="studentSelect" required disabled>
                                <option value="" data-en="-- Please select teacher first --" data-zh="-- 請先選擇教師 --">-- 請先選擇教師 --</option>
                            </select>
                        </div>
                        
                        <!-- Hidden fields to store actual values -->
                        <input type="hidden" id="studentName" name="studentName">
                        <input type="hidden" id="subject" name="subject">
                        <input type="hidden" id="classGrade" name="classGrade">
                        <input type="hidden" id="teacherName" name="teacherName">
                    </section>

                    <!-- Report Details -->
                    <section class="form-group">
                        <h2 class="section-title" data-en="Report Details" data-zh="報告詳情">Report Details</h2>
                        
                        <div class="form-row">
                            <div class="form-field">
                                <label for="reportTitle" data-en="Report Title" data-zh="報告標題">報告標題 *</label>
                                <input type="text" id="reportTitle" name="reportTitle" required>
                            </div>
                            
                            <div class="form-field">
                                <label for="reportDate" data-en="Report Date" data-zh="報告日期">報告日期 *</label>
                                <input type="date" id="reportDate" name="reportDate" required>
                            </div>
                        </div>
                    </section>

                    <!-- Report Sections -->
                    <section class="form-group">
                        <h2 class="section-title" data-en="Report Content" data-zh="報告內容">Report Content</h2>
                        
                        <!-- Section 1 -->
                        <div class="report-section-wrapper">
                            <div class="section-header">
                                <h3 class="section-subtitle" data-en="Section 1: Academic Performance Assessment" data-zh="第一部分：學業表現評估">Section 1: Academic Performance Assessment *</h3>
                                <button type="button" class="ai-enhance-btn" onclick="enhanceWithAI('section1', this)" data-en="Enhance with AI" data-zh="AI 增強">Enhance with AI</button>
                            </div>
                            <div id="section1" class="rich-text-editor"></div>
                        </div>

                        <!-- Section 2 -->
                        <div class="report-section-wrapper">
                            <div class="section-header">
                                <h3 class="section-subtitle" data-en="Section 2: In-class Behavioral Performance" data-zh="第二部分：課堂行為表現">Section 2: In-class Behavioral Performance *</h3>
                                <button type="button" class="ai-enhance-btn" onclick="enhanceWithAI('section2', this)" data-en="Enhance with AI" data-zh="AI 增強">Enhance with AI</button>
                            </div>
                            <div id="section2" class="rich-text-editor"></div>
                        </div>

                        <!-- Section 3 -->
                        <div class="report-section-wrapper">
                            <div class="section-header">
                                <h3 class="section-subtitle" data-en="Section 3: Learning Plan for Next 4 Lessons" data-zh="第三部分：未來四節課學習計劃">Section 3: Learning Plan for Next 4 Lessons *</h3>
                                <button type="button" class="ai-enhance-btn" onclick="enhanceWithAI('section3', this)" data-en="Enhance with AI" data-zh="AI 增強">Enhance with AI</button>
                            </div>
                            <div id="section3" class="rich-text-editor"></div>
                        </div>

                        <!-- Section 4 -->
                        <div class="report-section-wrapper">
                            <div class="section-header">
                                <h3 class="section-subtitle" data-en="Section 4: Teacher's Final Remarks & Action Items" data-zh="第四部分：教師總結及行動項目">Section 4: Teacher's Final Remarks & Action Items *</h3>
                                <button type="button" class="ai-enhance-btn" onclick="enhanceWithAI('section4', this)" data-en="Enhance with AI" data-zh="AI 增強">Enhance with AI</button>
                            </div>
                            <div id="section4" class="rich-text-editor"></div>
                        </div>
                    </section>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="clearForm()" data-en="Clear Form" data-zh="清除表單">Clear Form</button>
                        <button type="button" class="btn btn-primary" onclick="generateReport(this)" data-en="Generate LaTeX" data-zh="生成 LaTeX">Generate LaTeX</button>
                        <button type="button" class="btn btn-primary" onclick="generatePDF(this)" data-en="Generate PDF" data-zh="生成 PDF">Generate PDF</button>
                    </div>
                </form>
            </div>

            <!-- Live Preview Section -->
            <div class="preview-section">
                <h2 class="section-title" data-en="Live Preview" data-zh="即時預覽">Live Preview</h2>
                <div id="livePreview" class="preview-content">
                    <div class="preview-placeholder" data-en="Start filling the form to see the preview..." data-zh="開始填寫表單以查看預覽...">Start filling the form to see the preview...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for adding new entry -->
    <div id="addNewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeAddNewModal()">&times;</span>
            <h2 data-en="Add New Entry" data-zh="新增資料">新增資料</h2>
            <form id="addNewForm">
                <div class="form-field">
                    <label for="newTeacherName" data-en="Teacher Name" data-zh="教師姓名">教師姓名 *</label>
                    <input type="text" id="newTeacherName" name="newTeacherName" required>
                </div>
                <div class="form-field">
                    <label for="newStudentName" data-en="Student Name" data-zh="學生姓名">學生姓名 *</label>
                    <input type="text" id="newStudentName" name="newStudentName" required>
                </div>
                <div class="form-field">
                    <label for="newClassGrade" data-en="Class/Grade" data-zh="班級/年級">班級/年級 *</label>
                    <input type="text" id="newClassGrade" name="newClassGrade" required>
                </div>
                <div class="form-field">
                    <label for="newSubject" data-en="Subject" data-zh="科目">科目 *</label>
                    <input type="text" id="newSubject" name="newSubject" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddNewModal()" data-en="Cancel" data-zh="取消">取消</button>
                    <button type="submit" class="btn btn-primary" data-en="Submit" data-zh="提交">提交</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="app.js"></script>
</body>
</html>

